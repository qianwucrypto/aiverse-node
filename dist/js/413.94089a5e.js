"use strict";(self["webpackChunkaiverse_node"]=self["webpackChunkaiverse_node"]||[]).push([[413],{1413:function(t,s,e){e.r(s),e.d(s,{default:function(){return c}});var i=function(){var t=this,s=t._self._c;return s("div",{staticClass:"mobile-home"},[s("div",{staticClass:"absolute inset-0 bg-contain bg-center bg-no-repeat z-0 home-bg"}),s("div",{staticClass:"relative z-10"},[s("header",{staticClass:"p-4 relative pt-20"},[s("div",{staticClass:"absolute right-0 mt-2"},[t.walletAddress?t._e():s("button",{staticClass:"btn-connect flex items-center justify-center gap-2 px-4 py-2 pr-4 text-sm bg-active"},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",divBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"}})]),s("span",{staticClass:"tracking-[0.15em]"},[t._v("连接钱包")])]),t.walletAddress&&t.isChainCorrect?s("button",{staticClass:"btn-connect flex items-center justify-center gap-2 px-4 py-2 pr-4 text-sm bg-active"},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",divBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"}})]),s("span",{staticClass:"tracking-[0.15em]"},[t._v("切换网络")])]):t._e(),t.walletAddress&&!t.isChainCorrect?s("button",{staticClass:"btn-connect flex items-center justify-center gap-2 px-4 py-2 pr-4 text-sm bg-active"},[s("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",fill:"none",divBox:"0 0 24 24",stroke:"currentColor"}},[s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"}})]),s("span",{staticClass:"tracking-[0.15em]"},[t._v(t._s(t.walletAddressShow))])]):t._e()])]),s("div",{staticClass:"px-4 py-8 pt-20",staticStyle:{"padding-top":"50vh"}},[s("div",{staticClass:"mb-10"},[s("h2",{staticClass:"font-extrabold mb-3 text-3xl"},[t._v("每 日 训 练")]),t.isRegistered?t._e():s("p",{staticClass:"text-gray-100 mb-6 text-xs"},[t._v("训练社区建设获得更多奖励")]),t.isRegistered?s("p",{staticClass:"text-gray-100 mb-6 text-xs"},[t._v("训练社区建设获得更多奖励")]):t._e(),t.user&&!t.isRegistered?s("van-button",{staticClass:"btn-primary w-2/3 mx-auto py-3 text-black font-bold relative bg-active",on:{click:function(s){t.showBind=!0}}},[s("span",[t._v("绑定邀请人")])]):t._e(),t.isRegistered&&!t.isCanFired?s("van-button",{staticClass:"btn-primary w-2/3 mx-auto py-3 text-black font-bold relative bg-active",attrs:{disabled:!0}},[s("van-count-down",{staticStyle:{color:"#999"},attrs:{time:t.timeCountDown,format:"HH 时 mm 分 ss 秒"}})],1):t._e(),t.isRegistered&&t.isCanFired?s("van-button",{staticClass:"btn-primary w-2/3 mx-auto py-3 text-black font-bold relative bg-active",attrs:{disabled:t.isFireLoading,loading:t.isFireLoading},on:{click:t.checkIn}},[s("span",[t._v("开 始 训 练")])]):t._e()],1)])]),s("van-popup",{style:{width:"80%",background:"linear-gradient(90deg, #7204FD 0%, #0940FF 100%)","border-radius":"10px"},attrs:{closeable:!0,"close-icon-position":"top-right"},model:{value:t.showBind,callback:function(s){t.showBind=s},expression:"showBind"}},[s("div",{staticClass:"tn-text-center tn-text-bold tn-padding",staticStyle:{"font-size":"18px"}},[t._v("綁定邀請人地址")]),s("div",{staticClass:"tn-padding-xs"},[s("div",{staticClass:"wrap"},[s("div",{staticClass:"wam__nickname"},[s("div",{staticClass:"nickname__data"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.inviteAddress,expression:"inviteAddress"}],staticClass:"input",attrs:{type:"nickname",placeholder:"請輸入邀請人地址","placeholder-style":"color: #AAAAAA;"},domProps:{value:t.inviteAddress},on:{input:function(s){s.target.composing||(t.inviteAddress=s.target.value)}}})])]),s("van-button",{staticClass:"wam__submit-btn bg-active-light",attrs:{loading:t.isLoading,disabled:t.isLoading},on:{click:t.bindAction}},[s("span",[t._v("確認綁定")])])],1)])]),t.toastShow?s("div",{staticClass:"toast-message"},[t._v(t._s(t.toastText))]):t._e()],1)},a=[],o=(e(1201),e(7173)),n={name:"Home",data:()=>({toastShow:!1,toastText:"",isLoading:!1,showSelectBox:!1,inviteAddress:"",showBind:!1,isFireLoading:!1,isClaimLoading:!1}),computed:{...(0,o.aH)(["user","walletAddress","isConnected","isChainCorrect","isRegistered","walletAddress","poolInstance"]),walletAddressShow(){return this.walletAddress.substr(0,4)+"..."+this.walletAddress.substr(-4)},isCanFired(){return!!this.user&&(console.log("isCanFired",this.timeCountDown),0==this.timeCountDown)},timeCountDown(){if(this.user){console.log(this.user);let t=this.user.lastCheckIn,s=this.user.dailyCheckInCount;console.log(s,t);let e=Math.floor(((new Date).getTime()+288e5)/86400/1e3);return this.user.lastCheckInDay<e?0:1==s?this.$appConfig.fireInterval-(new Date).getTime()+1e3*Number(t)>0?this.$appConfig.fireInterval-(new Date).getTime()+1e3*Number(t):0:2==s?(console.log(this.tomorrowTimestamp(),this.tomorrowTimestamp()-1e3*Number(t)),this.tomorrowTimestamp()-(new Date).getTime()>0?this.tomorrowTimestamp()-(new Date).getTime():0):0}return 0},isPrepared(){return this.isCanFired&&this.walletAddress&&this.isRegistered},rewardCount(){return this.user?(console.log(this.user),this.user.tokenRewardCount||0):0}},created(){let t=this.$getQueryString("address");t&&(this.inviteAddress=t)},methods:{tomorrowTimestamp(){const t=new Date,s=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0);return s.getTime()},showToast(t){this.toastText=t,this.toastShow=!0,setTimeout(()=>{this.toastShow=!1,this.toastText=""},2e3)},bindAction(){this.isLoading=!0,this.poolInstance&&this.poolInstance.register(this.inviteAddress).then(async t=>{const s=await t.wait();1===s.status?(this.showToast("绑定成功"),console.log("绑定成功！區塊號:",s.blockNumber),this.$store.dispatch("getUserInfo"),this.showBind=!1):console.log(s.status),this.isLoading=!1}).catch(t=>{this.isLoading=!1,console.log("绑定失败",t),this.showToast("绑定失败")})},checkIn(){this.isFireLoading=!0,this.poolInstance&&this.poolInstance.checkIn().then(async t=>{const s=await t.wait();1===s.status?(this.showToast("训练成功"),console.log("训练成功！區塊號:",s.blockNumber),this.$store.dispatch("getUserInfo"),this.showBind=!1):console.log(s.status),this.isFireLoading=!1}).catch(t=>{this.isFireLoading=!1,console.log("训练失败",t),this.showToast("训练失败")})},claimReward(){this.$router.push("/data")}}},r=n,l=e(8818),d=(0,l.A)(r,i,a,!1,null,"1ee10b26",null),c=d.exports}}]);
//# sourceMappingURL=413.94089a5e.js.map